# FFTP Client

"Fast FTP" (FFTP) is a made-up protocol for reliably transferring files over unreliable UDP sockets.

The data transmission occurs over the UDP protocol. But FFTP achieves reliablity by employing a Go-Back-N protocol to achieve reliable file transfer.

This is how FFTP works:

1. The client and server do a handshake over TCP
	1.1. The client sends a file name, file size, and its local UDP port number that it will send the packets on
	1.2. The server responds with its UDP port, on which it will send ACK packets
2. The client starts reading from a file and transmits them to server segment by segment, employing a Go-back-N acknoledgment mechanism


The Go-Back-N protocol works as follows:

The client holds a "transmission queue" internally, where it keeps track of which segments have been sent to the server and require acknowledgment. Segments have a sequence number and a payload. Client is listening on its UDP port for incoming ACK segments from the server, and empties the transmission queue for all the acknoledged sequence numbers. As space become available in the queue, next sequence numbers are transmitted and queued. An ACK with sequence number N indicates all the sequences 1,...,N-1 are received by the server and it is expecting a segment with sequence number N. 

To simulate the unreliablity of UDP, the server drops packets with a certain probablity and acknowledges packets with a delay, which can be modified in the server start script. If the client does not receive an ACK after a "time-out" period, it will re-send all the packets in the transmission queue.


you can run the server by running: (from main project directory):

./fftpserver/server.sh

and build the client using:

ant -f ./build/build.xml

then run the client start script with arguments

./script/fftpclient.sh <filepath> <hostname> <handshakeport> <windowsize> <timeout>


With the default settings, the server is listening on TCP port 2226 for handshaking, and a sample file baby_pine.jpg is provided in the client folder:

in one terminal from the fftpserver/ directory:
./server.sh

in another terminal from the fftpclient/ directory:
ant -f ./build/build.xml
./script/fftpclient.sh ./baby_pine.jpg localhost 2226 1000 100

fftp client documentation can be found in fftpclient/doc/index.html or generated by running the following from the fftpclient/ directory:
ant doc -f ./build/build.xml
